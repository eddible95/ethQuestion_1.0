{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{\"3D1N\":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/home\",function(){return n(\"CH2o\")}])},CH2o:function(e,t,n){\"use strict\";n.r(t);var a=n(\"o0o1\"),i=n.n(a),r=n(\"1OyB\"),s=n(\"vuIU\"),o=n(\"Ji7U\"),l=n(\"md7G\"),u=n(\"foSv\"),c=n(\"q1tI\"),h=n.n(c),d=n(\"xsZ3\"),p=n.n(d),f=(n(\"LvDl\"),n(\"ikXu\")),m=n(\"SwRX\"),g=n(\"+6Dn\"),y=n(\"WYlG\"),S=n(\"Mt1y\"),w=n(\"MqQV\"),b=n(\"3mGJ\"),C=n(\"aQu0\"),v=n(\"D1pA\"),A=n(\"pLir\"),k=n(\"vRqb\"),x=n(\"QetY\"),R=n(\"UZm1\"),Q=n(\"CFn4\"),T=n(\"OIDg\"),z=(n(\"6JRj\"),n(\"l+mR\")),L=n(\"XPRw\"),M=n(\"5Yp1\"),D=n(\"8cHP\"),E=n(\"oZBQ\"),O=n(\"ObTy\"),q=n(\"Ma5Y\"),P=n.n(q),H=h.a.createElement;function I(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var V=function(e){Object(o.a)(a,e);var t,n=(t=a,function(){var e,n=Object(u.a)(t);if(I()){var a=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return Object(l.a)(this,e)});function a(e){var t;return Object(r.a)(this,a),(t=n.call(this,e)).state={login:!1,accountType:null,tags:[],topTags:[],loading:!0,sortBy:null,data:[],summaries:[],questionLimit:30,questionLimitChoice:[],isSSR:!1,isMining:!1},t}return Object(s.a)(a,[{key:\"componentDidUpdate\",value:function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:this.props!=e&&this.fetchQuestionData();case 1:case\"end\":return t.stop()}}),null,this,null,Promise)}},{key:\"componentDidMount\",value:function(){var e,t,n,a;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(\"undefined\"!==typeof E.a){r.next=3;break}return this.setState({loading:!1}),r.abrupt(\"return\");case 3:if(e=!1,!this.props.isLogin){r.next=18;break}return e=!0,r.next=8,i.a.awrap(T.a.methods.getProfile(this.props.account).call());case 8:return t=r.sent,n=Object(L.a)(t),r.next=12,i.a.awrap(n.methods.getAccountType().call());case 12:return a=0==(a=r.sent)?\"Admin\":\"User\",r.next=16,i.a.awrap(this.fetchQuestionData());case 16:this.setState({login:e}),this.setState({accountType:a});case 18:this.setState({loading:!1});case 19:case\"end\":return r.stop()}}),null,this,null,Promise)}},{key:\"fetchQuestionData\",value:function(){var e,t,n,a,r,s,o,l,u,c,h,d,p,f,m,g,y;return i.a.async((function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,i.a.awrap(T.a.methods.getDeployedQuestions().call());case 2:if(e=S.sent,t=e.length,this.setState({deployedQuestionsCount:t}),n=[],void 0==this.props.queryValue||\"favicon.ico\"==this.props.queryValue){S.next=12;break}return a=decodeURIComponent(this.props.queryValue),S.next=10,i.a.awrap(Object(O.f)(a,e));case 10:e=S.sent,t=e.length;case 12:r=0;case 13:if(!(r<t)){S.next=28;break}return s=Object(z.a)(e[r]),S.next=17,i.a.awrap(s.methods.getSummary().call());case 17:if((o=S.sent)[9]){S.next=25;break}return n[r]=o,S.next=22,i.a.awrap(s.methods.getAnswerList().call());case 22:l=S.sent,n[r][10]=l.length,n[r][11]=e[r];case 25:r++,S.next=13;break;case 28:for(n=n.reverse(),u=[30],c=Math.floor(n.length/30),h=1;h<=c;h++)u.push(30*(h+1));return d={},(n=n.slice(0,this.state.questionLimit)).forEach((function(e){e[8].forEach((function(e){void 0==d[e]?d[e]=1:d[e]=d[e]+1}))})),(p=Object.keys(d).map((function(e){return[e,d[e]]}))).sort((function(e,t){return t[1]-e[1]})),f=[],p.forEach((function(e){f.push(e[0])})),d=[],p.slice(0,10).forEach((function(e){d.push(e[0])})),S.next=43,i.a.awrap(E.a.eth.isMining());case 43:return m=S.sent,S.next=46,i.a.awrap(E.a.eth.getBlockNumber());case 46:return g=S.sent,S.next=49,i.a.awrap(T.a.methods.getEthWallets().call());case 49:y=S.sent,this.setState({isMining:m,blockNumber:g,users:y.length}),this.setState({topTags:d}),this.setState({tags:f}),this.setState({summaries:n}),this.setState({questionLimitChoice:u});case 55:case\"end\":return S.stop()}}),null,this,null,Promise)}},{key:\"renderQuestionHeader\",value:function(){return H(f.a.Row,null,H(f.a.HeaderCell,{textAlign:\"center\",width:2},H(\"span\",{style:{fontSize:15,color:\"#6A737C\"}},\"Current Phase\")),H(f.a.HeaderCell,{textAlign:\"center\",width:2},H(\"span\",{style:{fontSize:15,color:\"#6A737C\"}},\"Answers Submitted\")),H(f.a.HeaderCell,{textAlign:\"center\",width:2},H(\"span\",{style:{fontSize:15,color:\"#6A737C\"}},\"Reward\")),H(f.a.HeaderCell,{textAlign:\"center\"},H(\"span\",{style:{fontSize:15,color:\"#6A737C\"}},\"Question Title\")))}},{key:\"renderQuestionList\",value:function(){var e=this,t=this.state.summaries;return(t=Object(O.h)(t,this.state.sortBy)).map((function(t,n){var a=t[4],i=t[8];return H(f.a.Row,{key:n},H(f.a.Cell,{textAlign:\"center\",width:2},H(m.a,{size:\"mini\",color:\"red\"},H(m.a.Value,null,0==a?H(\"span\",{style:{fontSize:15,color:\"red\"}},\" Answering\"):1==a?H(\"span\",{style:{fontSize:15,color:\"#C9C633\"}},\" Voting\"):H(\"span\",{style:{fontSize:15,color:\"#10EE44\"}},\" Rewarded\")),H(m.a.Label,null,H(\"span\",{style:{fontSize:15,color:\"#6A737C\"}},\"Phase\")))),H(f.a.Cell,{textAlign:\"center\",width:2},H(m.a,{size:\"mini\",color:\"red\"},H(m.a.Value,null,H(\"span\",{style:{fontSize:15,color:\"#6A737C\"}},t[10])),H(m.a.Label,null,H(\"span\",{style:{fontSize:15,color:\"#6A737C\"}},\"answer(s)\")))),H(f.a.Cell,{textAlign:\"center\",width:2},H(m.a,{size:\"mini\",color:\"red\"},H(m.a.Value,null,H(\"span\",{style:{fontSize:15,color:\"#6A737C\"}},1e-4*t[2])),H(m.a.Label,null,H(\"span\",{style:{fontSize:15,color:\"#6A737C\"}},\"EQT(s)\")))),H(f.a.Cell,{textAlign:\"left\"},H(g.a.Row,{textAlign:\"left\"},H(\"span\",{style:{fontSize:18,color:\"#6A737C\",cursor:\"pointer\"},onClick:function(){return D.Router.pushRoute(\"/questions/\".concat(t[11]))}},H(\"a\",null,t[0]))),e.renderTag(i,\"mini\")))}))}},{key:\"renderMobileQuestionList\",value:function(){var e=this,t=this.state.summaries;return(t=Object(O.h)(t,this.state.sortBy)).map((function(t,n){var a=t[8],i=t[4];t[8];return H(y.a.Item,{key:n},H(y.a.Icon,{name:\"question circle\",size:\"large\",verticalAlign:\"middle\"}),H(y.a.Content,null,H(y.a.Header,{as:\"a\",onClick:function(){return D.Router.pushRoute(\"/questions/\".concat(t[11]))}},t[0]),H(g.a,null,H(g.a.Column,{width:10},H(y.a.Description,null,\"Number of Answer(s): \"+t[10]),H(y.a.Description,null,\"Reward: \"+1e-4*t[2]+\" EQT(s)\"),e.renderTag(a,\"mini\")),H(g.a.Column,{width:4},H(y.a.Description,null,H(\"b\",null,0==i?H(\"font\",{color:\"red\"},\"ANSWERING PHASE\"):1==i?H(\"font\",{color:\"#C9C633\"},\"VOTING PHASE\"):H(\"font\",{color:\"#10EE44\"},\"REWARDED PHASE\")))))),H(S.a,{hidden:!0}))}))}},{key:\"renderTag\",value:function(e,t){var n=[\"red\",\"olive\",\"blue\",\"teal\",\"green\"];return e.map((function(e,a){return H(w.a,{as:\"a\",onClick:function(){return D.Router.pushRoute(\"/\".concat(\"search/\"+encodeURIComponent(e)))},tag:!0,size:t,key:a,color:n[a%5]},e)}))}},{key:\"renderTopTags\",value:function(){return H(b.a,null,H(C.a,{as:\"h3\",textAlign:\"center\"},H(v.a,{name:\"tags\"}),\"Top 10 Tags\"),this.renderTag(this.state.topTags,\"medium\"))}},{key:\"renderAbout\",value:function(){return H(b.a,null,H(C.a,{as:\"h3\",textAlign:\"center\"},H(v.a,{name:\"question\"}),\"What Are Question Phases\"),H(\"span\",{style:{fontSize:18,color:\"red\"}},\"ANSWERING\"),H(\"p\",{style:{fontSize:15}},\"You can submit answers but answers will not be shown\"),H(\"span\",{style:{fontSize:18,color:\"#C9C633\"}},\"VOTING\"),H(\"p\",{style:{fontSize:15}},\"You can only approve answers submitted\"),H(\"span\",{style:{fontSize:18,color:\"#10EE44\"}},\"REWARDED\"),H(\"p\",{style:{fontSize:15}},\"Someone has already earned the reward for the question\"))}},{key:\"renderQuestionStatistics\",value:function(){return H(b.a,null,H(m.a.Group,{horizontal:!0,color:\"red\"},H(m.a,null,H(m.a.Value,null,this.state.deployedQuestionsCount),H(m.a.Label,null,\"Questions Asked\"))),H(m.a.Group,{horizontal:!0,color:\"yellow\"},H(m.a,null,H(m.a.Value,null,this.state.users),H(m.a.Label,null,\"Active Users\"))))}},{key:\"renderBlockChainStatistics\",value:function(){return H(b.a,null,H(C.a,{as:\"h3\",textAlign:\"center\"},H(v.a,{name:\"ethereum\"}),\"Block-Chain Status\"),this.state.isMining?H(m.a.Value,null,H(\"span\",{style:{fontSize:18,color:\"green\"}},\"Currently Mining\")):H(m.a.Value,null,H(\"span\",{style:{fontSize:18,color:\"red\"}},\"Currently Not Mining\")),H(m.a.Group,{horizontal:!0,color:\"green\"},H(m.a,null,H(m.a.Value,null,this.state.blockNumber),H(m.a.Label,null,\"Blocks Mined\"))),\"*When blockchain is not mining, do not create any transaction\")}},{key:\"renderSortSettings\",value:function(){var e=this;return H(\"span\",null,H(A.a,{text:\"Sorting Questions\",multiple:!0},H(A.a.Menu,null,H(A.a.Header,{icon:\"filter\",content:\"Sorting Options\"}),H(A.a.Menu,{scrolling:!0},[\"Ascending Phase\",\"Descending Phase\",\"Ascending Answers\",\"Descending Answers\",\"Ascending Rewards\",\"Descending Rewards\"].map((function(t,n){return H(A.a.Item,{key:n,text:t,onClick:function(){return e.setState({sortBy:n})}})}))))))}},{key:\"renderFilterSettings\",value:function(){var e=[\"red\",\"olive\",\"blue\",\"teal\",\"green\"];return H(\"span\",null,H(A.a,{text:\"Filter Questions\",multiple:!0},H(A.a.Menu,null,H(A.a.Header,{icon:\"tags\",content:\"Tag Label\"}),H(A.a.Menu,{scrolling:!0},this.state.tags.map((function(t,n){return H(A.a.Item,{key:n,text:t,label:{color:e[n%6],empty:!0,circular:!0},onClick:function(){return D.Router.pushRoute(\"/\".concat(\"search/\"+encodeURIComponent(t)))}})}))))))}},{key:\"renderQuestionLimitSettings\",value:function(){var e=this;return H(A.a,{text:\"Viewing Limit\",multiple:!0},H(A.a.Menu,null,H(A.a.Header,{icon:\"list\",content:\"Question Limit\"}),H(A.a.Menu,{scrolling:!0},this.state.questionLimitChoice.map((function(t,n){return H(A.a.Item,{key:n,text:t,onClick:function(){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(e.setState({questionLimit:t}));case 2:e.fetchQuestionData();case 3:case\"end\":return n.stop()}}),null,null,null,Promise)}})})))))}},{key:\"render\",value:function(){var e=this;return this.state.login?H(M.a,{accountType:this.state.accountType,page:\"Home\"},H(k.a,{fireOnMount:!0,getWidth:Object(Q.a)(this.props.isMobileFromSSR),minWidth:k.a.onlyTablet.minWidth},H(S.a,{hidden:!0}),H(g.a,{centered:!0},H(g.a.Column,{width:10},H(C.a,{as:\"h2\",textAlign:\"center\"},\"Questions Asked\"),H(b.a,{textAlign:\"center\"},this.renderSortSettings(),this.renderFilterSettings(),this.renderQuestionLimitSettings(),H(x.a,{onClick:function(){e.setState({sortBy:\"\"}),D.Router.pushRoute(\"/home\")}},\"Clear Fliter/Sort\")),H(f.a,null,H(f.a.Header,null,this.renderQuestionHeader()),H(f.a.Body,null,this.renderQuestionList())),H(S.a,{hidden:!0}),H(\"div\",{style:{marginTop:20}},\"Found \",this.state.summaries.length,\" Item(s).\")),H(g.a.Column,{width:3},this.renderAbout(),this.renderQuestionStatistics(),this.renderTopTags(),this.renderBlockChainStatistics()))),H(k.a,{fireOnMount:!0,getWidth:Object(Q.a)(this.props.isMobileFromSSR),maxWidth:k.a.onlyMobile.maxWidth},H(S.a,{hidden:!0}),H(g.a,{centered:!0},H(g.a.Column,null,H(C.a,{as:\"h2\",textAlign:\"center\"},\"Questions Asked\"),H(b.a,{textAlign:\"center\"},this.renderSortSettings(),this.renderFilterSettings(),this.renderQuestionLimitSettings()),H(x.a,{onClick:function(){e.setState({sortBy:\"\"}),D.Router.pushRoute(\"/home\")}},\"Clear Fliter/Sort\"),H(S.a,{hidden:!0}),H(y.a,{divided:!0,relaxed:!0},this.renderMobileQuestionList()),H(S.a,{hidden:!0}),H(\"div\",{style:{marginTop:20}},\"Found \",this.state.summaries.length,\" Item(s).\"))))):H(M.a,{accountType:this.state.accountType},H(R.a,{loading:this.state.loading,login:this.state.login}))}}],[{key:\"getInitialProps\",value:function(e){var t,n,a,r;return i.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=!1,n=e.query.value,e.req&&(a=e.req.headers[\"user-agent\"],r=new p.a(a),t=!!r.mobile()),i.abrupt(\"return\",{isMobileFromSSR:t,queryValue:n,isLogin:P()(e).login||\"\",account:P()(e).wallet||\"\"});case 4:case\"end\":return i.stop()}}),null,null,null,Promise)}}]),a}(c.Component);t.default=V}},[[\"3D1N\",0,2,11,1,3,4,5,6,7,8]]]);"}