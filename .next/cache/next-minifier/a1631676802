{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{Gq3Z:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/userProfile\",function(){return n(\"ZDsV\")}])},VcKe:function(e,t,n){\"use strict\";var a=n(\"1OyB\"),r=n(\"vuIU\"),o=n(\"Ji7U\"),s=n(\"md7G\"),i=n(\"foSv\"),c=n(\"q1tI\"),l=n.n(c),u=n(\"fuXp\"),p=n(\"aQu0\"),d=n(\"QetY\"),h=n(\"8cHP\"),g=l.a.createElement;function f(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){Object(o.a)(c,e);var t,n=(t=c,function(){var e,n=Object(i.a)(t);if(f()){var a=Object(i.a)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return Object(s.a)(this,e)});function c(e){return Object(a.a)(this,c),n.call(this,e)}return Object(r.a)(c,[{key:\"render\",value:function(){return g(l.a.Fragment,null,g(u.a,{open:this.props.timeout,basic:!0,size:\"small\"},g(p.a,{icon:\"ethereum\",content:\"Account Timeout\"}),g(u.a.Content,null,\"Your account has timed out after being idle for too long. Please re-login your account.\"),g(u.a.Actions,null,g(d.a,{color:\"green\",inverted:!0,attached:\"bottom\",onClick:function(){h.Router.pushRoute(\"/\")}},\"Login Account\"))))}}]),c}(c.Component);t.a=m},ZDsV:function(e,t,n){\"use strict\";n.r(t);var a=n(\"o0o1\"),r=n.n(a),o=n(\"1OyB\"),s=n(\"vuIU\"),i=n(\"JX7q\"),c=n(\"Ji7U\"),l=n(\"md7G\"),u=n(\"foSv\"),p=n(\"rePB\"),d=n(\"q1tI\"),h=n.n(d),g=n(\"WYlG\"),f=n(\"Mt1y\"),m=n(\"yE/o\"),b=n(\"z8k1\"),v=n(\"aQu0\"),x=n(\"D1pA\"),y=n(\"Pj1C\"),k=n(\"QetY\"),T=n(\"3mGJ\"),P=n(\"+lUf\"),w=n(\"fuXp\"),O=n(\"vFsZ\"),A=n(\"umxb\"),U=n(\"TbSc\"),S=n(\"UZm1\"),j=n(\"VcKe\"),R=n(\"oZBQ\"),E=n(\"5Yp1\"),M=n(\"OIDg\"),C=n(\"6JRj\"),D=n(\"gb1n\"),Q=n(\"ypsN\"),I=n(\"XPRw\"),B=n(\"8cHP\"),z=n(\"ObTy\"),V=n(\"Ma5Y\"),_=n.n(V),q=h.a.createElement;function J(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var Z=function(e){Object(c.a)(a,e);var t,n=(t=a,function(){var e,n=Object(u.a)(t);if(J()){var a=Object(u.a)(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return Object(l.a)(this,e)});function a(e){var t;return Object(o.a)(this,a),t=n.call(this,e),Object(p.a)(Object(i.a)(t),\"toggleVisibility\",(function(){return t.setState((function(e){return{visible:!e.visible}}))})),Object(p.a)(Object(i.a)(t),\"topUp\",(function(){var e,n,a;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(t.setState({toppingUp:!0,errorMessage:\"\"}),!Object(z.b)(t.state.topUpAmount)){o.next=21;break}return o.prev=2,e=t.state.account,o.next=6,r.a.awrap(M.a.methods.getProfile(e).call());case 6:return n=o.sent,a=Object(z.d)(\"Top Up: \"+t.state.topUpAmount+\" EQT(s)\"),o.next=10,r.a.awrap(Q.a.methods.buyTokens(1e4*t.state.topUpAmount,D.a._address,n,a).send({from:e,value:1e4*t.state.topUpAmount*t.state.tokenPrice,gasPrice:\"0\"}));case 10:B.Router.pushRoute(\"/home\"),o.next=19;break;case 13:o.prev=13,o.t0=o.catch(2),\"Returned error: authentication needed: password or unlock\"==o.t0.message&&t.setState({timeout:!0}),t.setState({errorMessage:o.t0.message}),t.setState({error:!0}),t.setState({toppingUp:!1});case 19:o.next=24;break;case 21:t.setState({errorMessage:\"Required Field(s) Empty or Invalid Input\"}),t.setState({error:!0}),t.setState({toppingUp:!1});case 24:case\"end\":return o.stop()}}),null,null,[[2,13]],Promise)})),Object(p.a)(Object(i.a)(t),\"exchange\",(function(){var e,n,a;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t.setState({exchanging:!0,errorMessage:\"\"}),o.prev=1,e=t.state.account,o.next=5,r.a.awrap(M.a.methods.getProfile(e).call());case 5:return n=o.sent,a=Object(z.d)(\"Exchange: 100 Points for 5 EQT(s)\"),o.next=9,r.a.awrap(Q.a.methods.exchangeTokens(D.a._address,n,a).send({from:e,gasPrice:\"0\"}));case 9:B.Router.pushRoute(\"/home\"),o.next=17;break;case 12:o.prev=12,o.t0=o.catch(1),\"Returned error: authentication needed: password or unlock\"==o.t0.message?t.setState({timeout:!0}):t.setState({errorMessage:o.t0.message+\" Insufficient Points\"}),t.setState({error:!0}),t.setState({exchanging:!1});case 17:case\"end\":return o.stop()}}),null,null,[[1,12]],Promise)})),t.state={visible:!1,login:!1,loading:!0,timeout:!1,accountType:null,account:null,token:null,emailAddress:null,points:null,transactions:[],topUpModalOpen:!1,topUp:!1,topUpAmount:\"\",error:!1,errorMessage:\"\",tokenPrice:\"\",exchanging:!1},t}return Object(s.a)(a,[{key:\"componentDidMount\",value:function(){var e,t,n,a,o,s,i,c,l,u;return r.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(\"undefined\"!==typeof R.a){p.next=3;break}return this.setState({loading:!1}),p.abrupt(\"return\");case 3:if(!1,!this.props.isLogin){p.next=35;break}return!0,e=this.props.account,p.next=9,r.a.awrap(M.a.methods.getProfile(e).call());case 9:return t=p.sent,n=Object(I.a)(t),p.next=13,r.a.awrap(C.a.methods.getBinding(e).call());case 13:return a=p.sent,p.next=16,r.a.awrap(D.a.methods.balanceOf(e).call());case 16:return p.t0=p.sent,o=(1e-4*p.t0).toFixed(4),p.next=20,r.a.awrap(R.a.eth.getBalance(e));case 20:return s=p.sent,p.next=23,r.a.awrap(n.methods.getPoints().call());case 23:return i=p.sent,p.next=26,r.a.awrap(n.methods.getTransactions().call());case 26:return c=p.sent,p.next=29,r.a.awrap(Q.a.methods.getTokenPrice().call());case 29:return l=p.sent,p.next=32,r.a.awrap(n.methods.getAccountType().call());case 32:u=0==(u=p.sent)?\"Admin\":\"User\",this.setState({accountType:u,account:e,token:o,etherBalance:s,emailAddress:a,points:i,transactions:c,login:!0,tokenPrice:l});case 35:this.setState({loading:!1});case 36:case\"end\":return p.stop()}}),null,this,null,Promise)}},{key:\"renderTransactions\",value:function(){return this.state.transactions.map((function(e,t){return q(g.a.Item,{key:t},q(g.a.Icon,{name:\"calendar outline\",size:\"large\",verticalAlign:\"middle\"}),q(g.a.Content,null,e))}))}},{key:\"render\",value:function(){var e=this;return this.state.login?q(E.a,{accountType:this.state.accountType,page:\"Profile\"},q(f.a,{hidden:!0}),q(m.a,null,q(b.a,{color:\"red\",centered:!0,fluid:!0},q(b.a.Content,null,q(v.a,{as:\"h1\",textAlign:\"center\"},q(x.a,{name:\"user\",circular:!0})),q(b.a.Header,{textAlign:\"center\"},\"Account Details:\",q(\"div\",{style:{color:\"red\",fontSize:\"small\",wordWrap:\"break-word\"}},this.state.account)),q(b.a.Meta,{textAlign:\"center\"},q(\"b\",null,this.state.accountType)),q(b.a.Description,{textAlign:\"center\"},q(\"b\",null,\"EQT Balance:\"),\" \",this.state.token,q(y.a,{trigger:q(k.a,{icon:\"ethereum\",onClick:function(){e.setState({topUpModalOpen:!0,topUpAmount:\"\",error:!1,errorMessage:\"\"})},floated:\"right\",size:\"mini\",color:\"green\"}),content:\"Top Up EQT(s)\",inverted:!0})),q(b.a.Description,{textAlign:\"center\"},q(\"b\",null,\"Ether Balance:\"),\" \",this.state.etherBalance),q(b.a.Description,{textAlign:\"center\"},q(\"b\",null,\"Points Accumulated:\"),\" \",this.state.points),q(b.a.Description,{textAlign:\"center\"},q(\"b\",null,\"Valid Email Address:\"),\" \",this.state.emailAddress)))),q(f.a,{hidden:!0}),q(m.a,null,q(T.a,{textAlign:\"center\"},q(\"b\",{style:{fontSize:\"20px\"}},\"Transaction History\"),q(y.a,{trigger:q(k.a,{icon:this.state.visible?\"minus\":\"plus\",onClick:this.toggleVisibility,floated:\"right\",size:\"mini\"}),content:\"Click to expand/close\",inverted:!0})),q(P.a,{visible:this.state.visible,animation:\"scale\",duration:500},q(g.a,{divided:!0,size:\"huge\"},this.renderTransactions())),q(w.a,{open:this.state.topUpModalOpen,size:\"small\"},q(v.a,{icon:\"ethereum\",content:\"Topping Up EQT(s)\"}),q(w.a.Content,null,q(O.a,{error:!!this.state.errorMessage,style:{marginTop:\"10px\"}},q(O.a.Field,{required:!0},q(\"label\",null,\"Top Up Amount (1 EQT = \",1e-18*this.state.tokenPrice,\" Ether)\"),q(A.a,{label:\"EQT(s)\",labelPosition:\"right\",placeholder:\"Enter EQT Value\",value:this.state.topUpAmount,onChange:function(t){return e.setState({topUpAmount:t.target.value})}}))),q(U.a,{error:!0,header:\"Oops!\",content:this.state.errorMessage,hidden:!this.state.error})),q(w.a.Actions,null,q(k.a,{color:\"red\",onClick:function(){e.setState({topUpModalOpen:!1})}},q(x.a,{name:\"remove\"}),\" Cancel\"),q(k.a,{color:\"green\",onClick:this.topUp,loading:this.state.toppingUp},q(x.a,{name:\"checkmark\"}),\" Top Up\"),q(k.a,{color:\"green\",onClick:this.exchange,loading:this.state.exchanging},q(x.a,{name:\"exchange\"}),\" Exchange With Points\")))),q(j.a,{timeout:this.state.timeout})):q(E.a,{accountType:this.state.accountType},q(S.a,{loading:this.state.loading,login:this.state.login}))}}],[{key:\"getInitialProps\",value:function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",{isLogin:_()(e).login||\"\",account:_()(e).wallet||\"\"});case 1:case\"end\":return t.stop()}}),null,null,null,Promise)}}]),a}(d.Component);t.default=Z}},[[\"Gq3Z\",0,2,1,3,4,5,6,7,8,9,10]]]);"}