{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React, { Component } from 'react';\nimport { Feed, Button, Header } from 'semantic-ui-react';\nimport factory from '../ethereum/factory';\nimport Question from '../ethereum/question';\nimport Layout from '../components/Layout';\nimport { Link, Router } from '../routes';\nimport QuestionRow from '../components/QuestionRow';\nimport web3 from '../ethereum/web3';\n\nvar HomePage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(HomePage, _Component);\n\n  function HomePage() {\n    _classCallCheck(this, HomePage);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(HomePage).apply(this, arguments));\n  }\n\n  _createClass(HomePage, [{\n    key: \"renderQuestions\",\n    value: function renderQuestions() {\n      var questionsDeployed = this.props.summaries;\n      return questionsDeployed.map(function (summary, index) {\n        return React.createElement(QuestionRow, {\n          key: index,\n          summary: summary\n        });\n      });\n    }\n  }, {\n    key: \"renderRentsDesktop\",\n    value: function renderRentsDesktop() {\n      var _this = this;\n\n      var questionsDeployed = this.props.summaries;\n      var isOverDue = 0;\n      var canShareToken = 0;\n      var numAnswer4 = 1;\n      var rating = 4;\n      return questionsDeployed.map(function (summary, index) {\n        return React.createElement(Table.Row, {\n          key: i\n        }, React.createElement(Table.Cell, {\n          textAlign: \"center\",\n          width: 2\n        }, React.createElement(Statistic, {\n          size: \"mini\",\n          color: \"red\"\n        }, React.createElement(Statistic.Value, null, React.createElement(\"span\", {\n          style: {\n            fontSize: 15,\n            color: '#6A737C'\n          }\n        }, React.createElement(Rating, {\n          icon: \"star\",\n          size: \"huge\",\n          rating: rating,\n          maxRating: 5,\n          disabled: true\n        }))), React.createElement(Statistic.Label, null, React.createElement(\"span\", {\n          style: {\n            fontSize: 15,\n            color: '#6A737C'\n          }\n        }, \"votes\")))), React.createElement(Table.Cell, {\n          textAlign: \"center\",\n          width: 2\n        }, React.createElement(Statistic, {\n          size: \"mini\",\n          color: \"red\"\n        }, React.createElement(Statistic.Value, null, React.createElement(\"span\", {\n          style: {\n            fontSize: 15,\n            color: '#6A737C'\n          }\n        }, \"1\")), React.createElement(Statistic.Label, null, React.createElement(\"span\", {\n          style: {\n            fontSize: 15,\n            color: '#6A737C'\n          }\n        }, \"answers\")))), React.createElement(Table.Cell, {\n          textAlign: \"center\",\n          width: 2\n        }, React.createElement(Statistic, {\n          size: \"mini\",\n          color: \"red\"\n        }, React.createElement(Statistic.Value, null, React.createElement(\"span\", {\n          style: {\n            fontSize: 15,\n            color: '#6A737C'\n          }\n        }, summary[2])), React.createElement(Statistic.Label, null, React.createElement(\"span\", {\n          style: {\n            fontSize: 15,\n            color: '#6A737C'\n          }\n        }, \"ethers\")))), React.createElement(Table.Cell, {\n          textAlign: \"left\"\n        }, React.createElement(Grid.Row, {\n          textAlign: \"left\"\n        }, React.createElement(\"span\", {\n          style: {\n            fontSize: 18,\n            color: '#6A737C',\n            cursor: 'pointer'\n          },\n          onClick: function onClick() {\n            return Router.pushRoute(\"/questions/\".concat(_this.props.questionsDeployed[index]));\n          }\n        }, React.createElement(\"a\", null, summary[0]))), isOverDue ? canShareToken ? numAnswer4 ? React.createElement(Grid.Row, {\n          textAlign: \"right\"\n        }, React.createElement(Button, {\n          positive: true,\n          onClick: function onClick(e) {\n            return _this.shareToken(e, address, i);\n          },\n          loading: _this.state.loadingShareToken && _this.state.currentIndex == i,\n          disabled: _this.state.disabledShareToken\n        }, \"Share Tokens!\"), React.createElement(Message, {\n          color: \"red\",\n          compact: true,\n          size: \"mini\",\n          header: 'End time: ' + timeEnd\n        })) : React.createElement(Grid.Row, {\n          textAlign: \"right\"\n        }, \" \", React.createElement(\"span\", null, \"No answers more than 4 stars\")) : React.createElement(Grid.Row, {\n          textAlign: \"right\"\n        }, React.createElement(\"span\", null, \"Tokens Shared!\", React.createElement(Icon, {\n          name: \"check\",\n          color: \"green\"\n        }))) : React.createElement(Grid.Row, {\n          textAlign: \"right\"\n        }, React.createElement(Message, {\n          color: \"yellow\",\n          compact: true,\n          size: \"mini\",\n          header: 'End time: ' + timeEnd\n        }))));\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Layout, null, React.createElement(\"div\", null, React.createElement(Header, {\n        as: \"h2\",\n        textAlign: \"center\"\n      }, \"Questions Posted\")), this.renderRentsDesktop());\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var accounts, deployedQuestions, deployedQuestionsCount, questions, summaries, _i;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return web3.eth.getAccounts();\n\n              case 2:\n                accounts = _context.sent;\n                _context.next = 5;\n                return factory.methods.getDeployedQuestions().call();\n\n              case 5:\n                deployedQuestions = _context.sent;\n                deployedQuestionsCount = deployedQuestions.length; // Stores all Question contracts\n\n                questions = [];\n                summaries = [];\n                _i = 0;\n\n              case 10:\n                if (!(_i < deployedQuestionsCount)) {\n                  _context.next = 22;\n                  break;\n                }\n\n                questions[_i] = Question(deployedQuestions[_i]);\n                _context.next = 14;\n                return questions[_i].methods.getSummary().call();\n\n              case 14:\n                summaries[_i] = _context.sent;\n                _context.next = 17;\n                return questions[_i].methods.start().call();\n\n              case 17:\n                summaries[_i][6] = _context.sent;\n                console.log(summaries);\n\n              case 19:\n                _i++;\n                _context.next = 10;\n                break;\n\n              case 22:\n                return _context.abrupt(\"return\", {\n                  summaries: summaries,\n                  deployedQuestions: deployedQuestions,\n                  accounts: accounts\n                });\n\n              case 23:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps() {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return HomePage;\n}(Component);\n\nexport default HomePage;","map":{"version":3,"sources":["C:\\Users\\edd1e\\Desktop\\ethQuestion\\pages\\index.js"],"names":["React","Component","Feed","Button","Header","factory","Question","Layout","Link","Router","QuestionRow","web3","HomePage","questionsDeployed","props","summaries","map","summary","index","isOverDue","canShareToken","numAnswer4","rating","i","fontSize","color","cursor","pushRoute","e","shareToken","address","state","loadingShareToken","currentIndex","disabledShareToken","timeEnd","renderRentsDesktop","eth","getAccounts","accounts","methods","getDeployedQuestions","call","deployedQuestions","deployedQuestionsCount","length","questions","getSummary","start","console","log"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Feed, Button, Header } from 'semantic-ui-react';\r\nimport factory from '../ethereum/factory';\r\nimport Question from '../ethereum/question';\r\nimport Layout from '../components/Layout';\r\nimport {Link, Router} from '../routes'\r\nimport QuestionRow from '../components/QuestionRow';\r\nimport web3 from '../ethereum/web3'\r\n\r\nclass HomePage extends Component {\r\n\r\n    static async getInitialProps () {\r\n        const accounts = await web3.eth.getAccounts();\r\n        // Retrieve an array of all our deployed questions addresses.\r\n        const deployedQuestions = await factory.methods.getDeployedQuestions().call();\r\n        const deployedQuestionsCount = deployedQuestions.length;\r\n\r\n        // Stores all Question contracts\r\n        let questions = [];\r\n        let summaries = [];\r\n        for(let i=0; i<deployedQuestionsCount; i++) {\r\n          questions[i] = Question(deployedQuestions[i]);\r\n          summaries[i] = await questions[i].methods.getSummary().call();\r\n          summaries[i][6] = await questions[i].methods.start().call();\r\n          console.log(summaries);\r\n        }\r\n\r\n        return { summaries, deployedQuestions, accounts };\r\n    }\r\n\r\n    renderQuestions(){\r\n        const questionsDeployed = this.props.summaries;\r\n        return questionsDeployed.map((summary, index) => {\r\n            return <QuestionRow\r\n                key={index}\r\n                summary={summary}\r\n            />;\r\n        });\r\n    }\r\n\r\n    renderRentsDesktop() {\r\n        const questionsDeployed = this.props.summaries;\r\n        const isOverDue = 0;\r\n        const canShareToken = 0;\r\n        const numAnswer4 = 1;\r\n        const rating = 4;\r\n        return questionsDeployed.map((summary, index) => {\r\n            return <Table.Row key={i}>\r\n                <Table.Cell textAlign='center' width={2}>\r\n                    <Statistic size='mini' color='red'>\r\n                        <Statistic.Value><span\r\n                            style={{fontSize: 15, color: '#6A737C'}}><Rating icon='star' size='huge'\r\n                                                                             rating={rating}\r\n                                                                             maxRating={5} disabled />\r\n                                        </span></Statistic.Value>\r\n                        <Statistic.Label><span style={{fontSize: 15, color: '#6A737C'}}>votes</span></Statistic.Label>\r\n                    </Statistic>\r\n                </Table.Cell>\r\n                <Table.Cell textAlign='center' width={2}>\r\n                    <Statistic size='mini' color='red'>\r\n                        <Statistic.Value><span style={{fontSize: 15, color: '#6A737C'}}>1</span></Statistic.Value>\r\n                        <Statistic.Label><span style={{fontSize: 15, color: '#6A737C'}}>answers</span></Statistic.Label>\r\n                    </Statistic>\r\n                </Table.Cell>\r\n                <Table.Cell textAlign='center' width={2}>\r\n                    <Statistic size='mini' color='red'>\r\n                        <Statistic.Value><span style={{fontSize: 15, color: '#6A737C'}}>{summary[2]}</span></Statistic.Value>\r\n                        <Statistic.Label><span style={{fontSize: 15, color: '#6A737C'}}>ethers</span></Statistic.Label>\r\n                    </Statistic>\r\n                </Table.Cell>\r\n                <Table.Cell textAlign='left'>\r\n                    <Grid.Row textAlign='left'>\r\n                        <span style={{fontSize: 18, color: '#6A737C', cursor: 'pointer'}} onClick={() => Router.pushRoute(`/questions/${this.props.questionsDeployed[index]}`)}><a>{summary[0]}</a></span></Grid.Row>\r\n                    {isOverDue ?\r\n                        ((canShareToken) ? ((numAnswer4) ?\r\n                            <Grid.Row textAlign='right'>\r\n                                <Button positive onClick={(e)=>this.shareToken(e, address, i)}  loading={this.state.loadingShareToken&&(this.state.currentIndex==i)} disabled={this.state.disabledShareToken}>\r\n                                    Share Tokens!\r\n                                </Button>\r\n                                <Message color='red' compact size='mini'\r\n                                         header={'End time: '+timeEnd}\r\n                                />\r\n                            </Grid.Row> : <Grid.Row textAlign='right'> <span>No answers more than 4 stars</span></Grid.Row>) : <Grid.Row textAlign='right'><span>Tokens Shared!<Icon name='check' color='green'/></span></Grid.Row>) :\r\n                        <Grid.Row textAlign='right'>\r\n                            <Message color='yellow' compact size='mini'\r\n                                     header={'End time: '+timeEnd}\r\n                            />\r\n                        </Grid.Row>}\r\n                </Table.Cell>\r\n            </Table.Row>\r\n        });\r\n      }\r\n\r\n    render() {\r\n        return (\r\n            <Layout>\r\n                <div>\r\n                    <Header as='h2' textAlign='center'>\r\n                        Questions Posted\r\n                    </Header>\r\n                </div>\r\n                {this.renderRentsDesktop()}\r\n            </Layout>\r\n        );\r\n    }\r\n}\r\n\r\nexport default HomePage;\r\n"]},"metadata":{},"sourceType":"module"}